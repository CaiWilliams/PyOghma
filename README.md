# PyOghma

A Python API for OghmaNano, enabling programmatic description and execution of drift-diffusion simulations.

## Features

- Programmatically modify and execute drift-diffusion simulations.
- Seamlessly integrate with OghmaNano for advanced simulation workflows.
- Support for optical, thermal, epitaxy, and simulation configurations.
- Easy-to-use Python interface for managing and analyzing simulation results.

## Installation

Before installing PyOghma, ensure that OghmaNano is installed. You can download OghmaNano from [oghma-nano.com](https://www.oghma-nano.com).

To install PyOghma, use pip:

```bash
python -m pip install PyOghma
```

## Usage/Examples

To use PyOghma, you need a source simulation generated by OghmaNano. Extract the `sim.json` file from the simulation directory. Once extracted, you can programmatically modify and execute the simulation using PyOghma, as shown in the example below:

```python
import PyOghma as po

# Initialize OghmaNano and Results objects
Oghma = po.OghmaNano()
Results = po.Results()

# Set the source simulation directory
source_simulation = r"\example\pm6y6\"
Oghma.set_source_simulation(source_simulation)

# Set experiment parameters
experiment_name = 'NewExperiment'
Oghma.set_experiment_name(experiment_name)

mobility = 1e-5
trap_density = 1e-18
trapping_crosssection = 1e-20
recombination_crosssection = 1e-20
urbach_energy = 40e-3
temperature = 300
intensity = 0.5

# Clone the source simulation and modify parameters
experiment_name = 'NewExperiment' + str(1)
Oghma.clone('NewExperiment0')

# Update optical properties
Oghma.Optical.Light.set_light_Intensity(intensity)
Oghma.Optical.Light.update()

# Update thermal properties
Oghma.Thermal.set_temperature(temperature)
Oghma.Thermal.update()

# Update epitaxy properties
Oghma.Epitaxy.load_existing()
Oghma.Epitaxy.pm6y6.dos.mobility('both', mobility)
Oghma.Epitaxy.pm6y6.dos.trap_density('both', trap_density)
Oghma.Epitaxy.pm6y6.dos.trapping_rate('both', 'free to trap', trapping_crosssection)
Oghma.Epitaxy.pm6y6.dos.trapping_rate('both', 'trap to free', recombination_crosssection)
Oghma.Epitaxy.pm6y6.dos.urbach_energy('both', urbach_energy)
Oghma.Epitaxy.update()

# Add and run the simulation job
Oghma.add_job(experiment_name)
Oghma.run_jobs()

# Analyze results
Results.load_experiment(Oghma)
Results.find_results()
```

## API Overview

### Core Classes

- **`OghmaNano`**: Main class to manage simulations and configurations.
- **`Results`**: Class to handle and analyze simulation results.
- **`Optical`**: Class to configure optical properties such as light intensity and spectra.
- **`Thermal`**: Class to configure thermal properties like temperature and mesh.
- **`Epitaxy`**: Class to configure epitaxy properties such as mobility, trap density, and Urbach energy.

### Key Methods

#### `OghmaNano`
- `set_source_simulation(source_simulation)`: Set the source simulation directory.
- `set_experiment_name(experiment_name)`: Set the name of the experiment.
- `clone(dest_dir)`: Clone the source simulation to a new directory.
- `add_job(job_name)`: Add a simulation job.
- `run_jobs()`: Execute all added jobs.

#### `Results`
- `load_experiment(Oghma)`: Load the experiment details.
- `find_results()`: Locate and analyze simulation results.

#### `Optical`
- `set_light_Intensity(intensity)`: Set the light intensity in suns.
- `update()`: Update the optical configuration.

#### `Thermal`
- `set_temperature(temperature)`: Set the simulation temperature.
- `update()`: Update the thermal configuration.

#### `Epitaxy`
- `load_existing()`: Load existing epitaxy configurations.
- `update()`: Update the epitaxy configuration.
- `dos.mobility(carrier, value)`: Set carrier mobility.
- `dos.trap_density(carrier, value)`: Set trap density.
- `dos.trapping_rate(carrier, direction, value)`: Set trapping rates.
- `dos.urbach_energy(carrier, value)`: Set Urbach energy.

## Contributing

Contributions are welcome! If you'd like to contribute to PyOghma, please fork the repository and submit a pull request.

## License

This project is licensed under the MIT License. See the LICENSE file for details.

## Authors

- [@CaiWilliams](https://www.github.com/CaiWilliams)
